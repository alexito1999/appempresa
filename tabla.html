<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Códigos escaneados</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />
    <style>
      td,
      th,
      button.btn {
        font-size: 30px;
        padding: 4px;
      }
      a.btn {
        font-size: 35px;
      }

      .titulo-tabla {
        position: relative;
        display: inline-block;
      }
      .titulo-tabla::after {
        content: "";
        position: absolute;
        left: -10px; /* Se sale 10px a la izquierda */
        bottom: -18px; /* Separación debajo del texto */
        width: 30%; /* Solo 30% del ancho del h1 */
        height: 4px; /* Grosor de la línea */
        background-color: #facc15; /* Amarillo (Tailwind amber-400) */
        border-radius: 2px;
      }
    </style>
  </head>
  <body class="p-4">
    <h1 class="mb-5 titulo-tabla">Códigos escaneados</h1>

    <table class="table table-striped mb-4">
      <thead>
        <tr>
          <th>Código</th>
          <th>Fecha</th>
        </tr>
      </thead>
      <tbody id="tablaCodigos"></tbody>
    </table>

    <a href="index.html" class="btn btn-primary mt-3">Volver</a>

    <script>
      // Leer datos
      const lista = JSON.parse(localStorage.getItem("codigos")) || [];
      const tbody = document.getElementById("tablaCodigos");

      lista.forEach((item, index) => {
        const tr = document.createElement("tr");
        tr.innerHTML = ` <td>${item.codigo}</td> <td>${item.fecha}</td> <td> <button class="btn btn-danger btn-sm borrar" data-index="${index}"> Borrar </button> </td> `;
        tbody.appendChild(tr);
      });
      document.addEventListener("click", (e) => {
        if (e.target.classList.contains("borrar")) {
          const index = e.target.getAttribute("data-index");
          if (confirm("¿Seguro que quieres borrar este código?")) {
            const lista = JSON.parse(localStorage.getItem("codigos")) || [];
            lista.splice(index, 1);
            localStorage.setItem("codigos", JSON.stringify(lista));
            location.reload();
          }
        }
      });
    </script>
  </body>
</html>
